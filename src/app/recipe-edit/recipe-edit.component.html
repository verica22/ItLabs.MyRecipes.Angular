<div *ngIf="recipe">
    <div class="bgimg container col-sm-12" id="edit">
        <div class="edit">
            <div class="panel-heading">
                <h2 class="panel-title"><b>Edit {{recipe.Name}}!</b> </h2>
            </div>
            <div class="panel-body">

                <div>
                    <form name="checkoutBillingForm" #userForm="ngForm">
                        <div class="recipeName form-group" [ngClass]="{ 
                    'has-error':nameRef.invalid && nameRef.touched,
                    'has-success':nameRef.valid && nameRef.touched
                  }">
                            <label>Recipe Name</label>
                               <input type="text" #nameRef="ngModel" required minlength="3" maxlength="25" class="form-control" name="name" [(ngModel)]="recipe.Name">

                            <div class="help-block" *ngIf="nameRef.errors && (nameRef.dirty || nameRef.touched)">
                                <div [hidden]="!nameRef.errors.required">
                                    Please enter a name
                                </div>
                                <div [hidden]="!nameRef.errors.minlength">
                                    Please enter atleast 3 characters
                                </div>
                                <div [hidden]="!nameRef.errors.maxlength">
                                    Please enter 25 characters max
                                </div>
                            </div>
                            <b>{{nameRef.className}}</b>
                </div>
                <div class="description form-group" [ngClass]="{ 
                    'has-error':description.invalid  && description.touched,
                    'has-success':description.valid && description.touched
                     }">
                    <label> Description</label>
                    <textarea #description="ngModel" required minlength="10" maxlength="1000" name="description" [(ngModel)]="recipe.Description">
                            </textarea>

                    <div class="help-block" *ngIf="description.errors &&  (description.dirty || nameRef.touched)">
                        <div [hidden]="!description.errors.required">
                            Please enter description
                        </div>
                        <div [hidden]="!description.errors.minlength">
                            Recipe Description must be between 10 and 1000 characters
                        </div>
                        <div [hidden]="!description.errors.maxlength">
                            Recipe Description must be between 10 and 1000 characters
                        </div>
                    </div>
                    <b>{{description.className}}</b>
            </div>
            <div class="chackboxes">
                <div class="form-group col-xs-5">
                    <label>
                        <input #isDone type="checkbox" name="done" ng-true-value="true" [(ngModel)]="recipe.IsDone">
                        Done Recipe </label>

                </div>
                <div class="form-group col-xs-6">
                    <label>
                        <input #isFavorite type="checkbox" name="favourite" ng-true-value="true" [(ngModel)]="recipe.IsFavorite">
                       Favorite Recipe </label>

                </div>
            </div>
            </form>
        </div>
        <div class="container col-sm-12 form-group">
               <form name="checkoutBillingForm" #ingForm="ngForm">
            <div class="addIngredient container col-xs-12">
                <div class="ingredientName col-xs-5 form-group" [ngClass]="{ 
                    'has-error':ingredientName.invalid && ingredientName.touched,
                    'has-success':ingredientName.valid && ingredientName.touched
                  }">
                    <label> Ingredient</label>
                    <input #ingredientName name="ingredientName" required type="text" class="form-control" (keyup)="getIngredients(ingredientName.value)"
                        [ngModel]="ingredientname" />
                    <!--<span class="help-block" *ngIf="ingredientName.errors.required &&  ingredientName.touched">
                       <b> Please enter a name</b>
                    </span>-->
                    <div *ngFor="let ingredient of recipeingredients" class="form-control">
                        <span (click)="ingredientName.value=ingredient.Name; chooseIngredient(ingredient)"> 
                       {{ingredient.Name}}
                </span>
                    </div>
                    <!--<div class="help-block" *ngIf="nameRef.errors && (nameRef.dirty || nameRef.touched)">
                    <div [hidden]="!ingredientName.errors.required">
                        Please enter a name
                    </div>
                </div>
                <b>{{ingredientName.className}}</b>-->
            </div>
            <div class="quantity col-xs-2 form-group" [ngClass]="{ 
                    'has-error':quantity.invalid && quantity.touched,
                    'has-success':quantity.valid && quantity.touched
                     }">
                <label>Quantity </label>
                <input type="text" #quantity="ngModel" required class="form-control" name="quantity" [ngModel]="qua" />
                <div class="help-block" *ngIf="quantity.errors && (quantity.dirty || quantity.touched)">
                    <div [hidden]="!quantity.errors.required" style="margin-left:-13px;">
                        Required
                    </div>

                </div>
                <b>{{quantity.className}}</b>
    </div>
    <div class="measurement col-xs-3 form-group">
        <label>Measurement </label>
          <select #measurement name="measurement" class="form-control" (change)="parseValue($event.target.value)">
             <!--<option>--select--</option>-->
            <option *ngFor="let name of options"
                     [value]="name">{{name}}</option>
        </select>
    </div>
    
    <div class="addButton col-xs-1">
        <label> </label>
        <button [disabled]="!ingForm.form.valid" (click)="addIngredient(ingredientName.value, measurement.value, quantity.value)">
             <img src="../Photos/Plus.png"  opacity="0" title="Add" width="20px" height="20px" value="Delete" />
             </button>
    </div>
</div>
</form>

        <br/>
        <div class="addedIng container col-sm-12">
            <div class="panel-body">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Ingredient</th>
                            <th>Quantity </th>
                            <th>Measurement </th>

                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let recipeIngredient of recipe.RecipeIngredients">
                            <td>{{ recipeIngredient.IngredientName | lowercase}}</td>
                            <td>{{ recipeIngredient.Quantity }}</td>
                            <td>{{ recipeIngredient.Measurement | lowercase }}</td>
                            <td><button (click)="removeIngredient(recipe.RecipeIngredients)">
                         <img src="../Photos/minus.png"  opacity="0" title="Delete" width="20px" height="20px" value="Delete" /></button>
                            </td>
                        </tr>
                    </tbody>

                </table>
            </div>


        </div>
        <!--<div class="addedIngredients container col-sm-12" *ngIf="addedIngredients.length > 0">
            <div class="panel-body">
                <table class="table">
                    <thead>
                                <tr>
                                    <th>Quantity</th>
                                    <th>Measurement</th>
                                    <th>Ingredient Name</th>
                                    <th></th>
                                </tr>
                            </thead>
                    <tbody>
                        <tr *ngFor="let ingredient of addedIngredients">
                             <td>{{ingredient.Name}}</td>
                            <td>{{ingredient.Quantity}}</td>
                            <td>{{ingredient.Measurement}}</td>
                           
                            <td><button (click)="removeIngredient(ingredient)">
                         <img src="../Photos/minus.png"  opacity="0" title="Delete" width="20px" height="20px" value="Delete" /></button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>-->
        <div class="container col-sm-10"></div>

        <button [disabled]="!userForm.form.valid || !recipe.RecipeIngredients.length > 0" (click)="updateRecipe(recipe.Name,nameRef.value,description.value,isDone.checked,isFavorite.checked,recipe.RecipeIngredients)"
            type="submit" class="btn btn-default"> Save </button>


    </div>
</div>
</div>
</div>
